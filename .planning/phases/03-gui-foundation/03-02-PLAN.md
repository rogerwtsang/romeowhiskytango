---
phase: 03-gui-foundation
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - src/gui/dashboard/setup_panel.py
  - src/gui/dashboard/__init__.py
autonomous: true

must_haves:
  truths:
    - "User sees consolidated setup controls in one panel"
    - "User can expand/collapse Assumptions subsection"
    - "Team/season configuration remains accessible"
  artifacts:
    - path: "src/gui/dashboard/setup_panel.py"
      provides: "Consolidated setup panel with team config and assumptions"
      min_lines: 100
      exports: ["SetupPanel"]
    - path: "src/gui/dashboard/__init__.py"
      provides: "Dashboard package exports"
      exports: ["SetupPanel"]
  key_links:
    - from: "SetupPanel"
      to: "CollapsibleFrame"
      via: "composition for assumptions section"
      pattern: "CollapsibleFrame.*Assumptions"
    - from: "SetupPanel.assumptions content"
      to: "baserunning/errors/distribution settings"
      via: "migrated tab content"
      pattern: "labeled_slider|ttk\\.Checkbutton"
---

<objective>
Create SetupPanel that consolidates team/season configuration with assumptions subsection containing baserunning, errors, and distribution settings.

Purpose: Reduce navigation overhead by grouping all configuration in single collapsible panel.

Output: SetupPanel ready for integration into dashboard, containing all setup and assumptions controls.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-gui-foundation/03-CONTEXT.md
@.planning/phases/03-gui-foundation/03-RESEARCH.md
@src/gui/tabs/setup_tab.py
@src/gui/tabs/baserunning_tab.py
@src/gui/tabs/errors_tab.py
@src/gui/tabs/distribution_tab.py
@src/gui/widgets/collapsible_frame.py
@src/gui/widgets/labeled_slider.py
</context>

<tasks>

<task type="auto">
  <name>Create SetupPanel with team configuration</name>
  <files>src/gui/dashboard/setup_panel.py</files>
  <action>
Create src/gui/dashboard/setup_panel.py with SetupPanel class.

Implementation requirements:
- Inherit from ttk.Frame
- __init__ accepts parent parameter
- Use grid geometry manager with proper weights (see RESEARCH.md Pattern 4)
- Configure grid: columnconfigure(0, weight=1) for responsive layout
- Main sections: Team/Season config at top, Assumptions subsection below

Team/Season section (migrate from setup_tab.py):
- Team selection dropdown (ttk.Combobox)
- Season input (ttk.Entry)
- Load Data button
- Keep data loading logic from setup_tab.py

Assumptions subsection:
- Use CollapsibleFrame with text="Assumptions"
- Inside assumptions content frame, create three labeled sections using ttk.LabelFrame:
  - "Baserunning" section: Migrate baserunning_tab.py controls (aggression sliders)
  - "Errors & Wild Pitches" section: Migrate errors_tab.py controls (rate sliders)
  - "Hit Distribution" section: Migrate distribution_tab.py controls (ISO thresholds, distribution settings)

Use LabeledSlider for all slider controls (existing widget).
Follow RESEARCH.md grid layout patterns with sticky='ew' for horizontal fill.
Add proper padding (padding=10 for frames, padx/pady for spacing).

Do NOT mix geometry managers (RESEARCH.md Pitfall 3) - use grid throughout.
Configure grid weights to enable resizing (RESEARCH.md Pitfall 4).

Type hints for all methods, Google-style docstrings.
  </action>
  <verify>
    - File exists at src/gui/dashboard/setup_panel.py
    - SetupPanel class inherits from ttk.Frame
    - Contains team/season controls and CollapsibleFrame for assumptions
    - mypy src/gui/dashboard/setup_panel.py shows no errors
  </verify>
  <done>
SetupPanel created with consolidated team configuration and collapsible assumptions subsection containing all baserunning, errors, and distribution settings.
  </done>
</task>

<task type="auto">
  <name>Create dashboard package and export SetupPanel</name>
  <files>src/gui/dashboard/__init__.py</files>
  <action>
Create src/gui/dashboard/__init__.py to establish dashboard package.

Add import and export:
```python
"""
Dashboard components for unified UI.
"""
from src.gui.dashboard.setup_panel import SetupPanel

__all__ = ["SetupPanel"]
```

Follow existing package patterns from src/gui/tabs/__init__.py and src/gui/widgets/__init__.py.
  </action>
  <verify>
    - File exists at src/gui/dashboard/__init__.py
    - python -c "from src.gui.dashboard import SetupPanel; print(SetupPanel)" runs without error
  </verify>
  <done>
Dashboard package created with SetupPanel exported and importable.
  </done>
</task>

</tasks>

<verification>
Run mypy on created files:
```bash
mypy src/gui/dashboard/setup_panel.py
```

Verify imports work:
```bash
python -c "from src.gui.dashboard import SetupPanel; print(SetupPanel.__name__)"
```

Check that SetupPanel can be instantiated:
```bash
python -c "
import tkinter as tk
from src.gui.dashboard import SetupPanel
root = tk.Tk()
panel = SetupPanel(root)
print('SetupPanel instantiated successfully')
root.destroy()
"
```
</verification>

<success_criteria>
- SetupPanel consolidates team config + assumptions in single panel
- Assumptions subsection uses CollapsibleFrame and can be toggled
- All baserunning, errors, distribution controls migrated
- Panel uses grid geometry manager consistently
- Grid weights configured for responsive layout
- No mypy errors
- Panel can be instantiated without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-gui-foundation/03-02-SUMMARY.md`
</output>
